<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>ガチャ</title>

</head>
<script src="script/jquery-3.1.1.min.js"></script>

<style>
  .gacha-button {
    width: 250px;
    height: 60px;
    padding: 10px;
    font-size: 30px;
    margin-top: 40px;
    margin-right: 30px;
  }

  #teaming-button{
    width: 250px;
    height: 60px;
    padding: 10px;
    font-size: 30px;
    margin-top: 40px;
  }

  h1 {
        text-align: center;
        margin-bottom: 40px;
    }


  .columns {
    /* margin: 0 auto; */
    /* clear: left; */
    margin-bottom: 30px;
    text-align: center;
    white-space: nowrap;
  }

  .column {
    margin: 10px;
  }

  .play .audio_button {
    background-image: url(ガチャブル画像/♪surassyu.png);
  }

  .audio_button {
    position: relative;
    width: 40px;
    height: 40px;
    margin-left: 20px;
    margin-top: 20px;
    background: url(ガチャブル画像/♪.png) no-repeat center center;
    background-size: contain;
  }

  .img {
    display: inline-block;
    background: #ffff00;
    width: 10em;
    height: 91.42px;

  }
  #gacha-image{
    text-align: center;
    margin-bottom: 40px;
  }

  #btn-first{
    text-align: center;
    margin-bottom: 40px;
    }
    #btn-thereafter{
      text-align: center;
    margin-bottom: 40px;
    }
</style>

<body>

  <div class="audio_wrap">
    <div class="audio_button"></div>
    <audio id="audio" src="./Music/bgm_maoudamashii_fantasy14.mp3" autoplay loop>
    </audio>
  </div>

  </div>
  <h1>ガチャ</h1>
  </div>
  <div id="gacha-image">
    <img src="https://gamewith.s3.amazonaws.com/animation_gifs/65441dc021dfa933.gif" width="247" height="372">
  </div>

  <div id="column-all">
    <div class="columns">
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>

    </div>

    <div class="columns">
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>

    </div>

    <div class="columns">
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>
      <a class="column" draggable="true">
        <img class="img" src="" id="ball">
      </a>

    </div>
  </div>

  <div id="btn-first">
    <p><input type="button" value="ガチャを引く" onclick="Se(0)" id="btn-text" class="gacha-button"></p>
  </div>
  <div id="btn-thereafter">
    <p><input type="button" value="引きなおす" onclick="Se(0)" id="restart" class="gacha-button">
      <input type="button" value="編成" onclick="Se(1)" id="teaming-button"></p>
  </div>

  <script src="./Music/Se.js"></script>
  <script>

    document.querySelector("#btn-thereafter").style.display = "none";
    document.querySelector("#column-all").style.display = "none";
    document.querySelector("#btn-text").addEventListener("click", (e) => {
      document.querySelector("#gacha-image").style.display = "none";
      document.querySelector("#btn-first").style.display = "none";
      document.querySelector("#btn-thereafter").style.display = "block";
      document.querySelector("#column-all").style.display = "block";
    });

    const btn = document.querySelectorAll(".gacha-button");
    const team_btn = document.getElementById('teaming-button');

    var answer = document.querySelectorAll(".columns img");

    var id;
    var id1;
    var id2;
    var id3;
    var id4;
    var id5;
    var id6;
    var id7;
    var id8;
    var id9;
    var id10;
    var n2;
    var n3;

    btn.forEach(function (el, i) {
      el.addEventListener('click', function () {
        for (var i = 0; 0 < answer.length; i++) {
          const n = Math.random();

          if (n < 0.8) {
            var gr = 3;
          } else {
            var gr = 2;
          };

          switch (gr) {

            case 3:
              const results = ["assets/jeeta.png", "assets/katarina.png", "assets/rakamu.png", "assets/io.png", "assets/oigen.png",
                "assets/rozetta.png", "assets/risya.png", "assets/monika.png", "assets/syero.png", "assets/vira.png", "assets/kurokisi.png", "assets/okisu.png", "assets/suturumu.png", "assets/doranku.png"];
              n2 = Math.floor(Math.random() * results.length);
              answer[i].src = results[n2];
              break;

            case 2:
              const results2 = ["assets/ruria.png", "assets/b.png"];
              n3 = Math.floor(Math.random() * results2.length);
              answer[i].src = results2[n3];
              break;
          };

          const gachaResult = answer[i].src;

          switch (gachaResult) {
            case "http://hp1366.neecbox.net/GachaBlue/assets/jeeta.png":
              id = 1;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/ruria.png":
              id = 2;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/b.png":
              id = 3;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/katarina.png":
              id = 4;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/rakamu.png":
              id = 5;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/io.png":
              id = 6;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/oigen.png":
              id = 7;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/rozetta.png":
              id = 8;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/risya.png":
              id = 9;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/monika.png":
              id = 10;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/syero.png":
              id = 11;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/vira.png":
              id = 12;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/kurokisi.png":
              id = 13;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/okisu.png":
              id = 14;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/suturumu.png":
              id = 15;
              break;
            case "http://hp1366.neecbox.net/GachaBlue/assets/doranku.png":
              id = 16;
              break;
          };
          if (answer[i] == answer[0]) {
            id1 = id;
          } else if (answer[i] == answer[1]) {
            id2 = id;
          } else if (answer[i] == answer[2]) {
            id3 = id;
          } else if (answer[i] == answer[3]) {
            id4 = id;
          } else if (answer[i] == answer[4]) {
            id5 = id;
          } else if (answer[i] == answer[5]) {
            id6 = id;
          } else if (answer[i] == answer[6]) {
            id7 = id;
          } else if (answer[i] == answer[7]) {
            id8 = id;
          } else if (answer[i] == answer[8]) {
            id9 = id;
          } else if (answer[i] == answer[9]) {
            id10 = id;
          }

        }
      })
    })

    $(function () {
      var audioBtn = $('.audio_button'),
        audioWrap = $('.audio_wrap'),
        audio = document.getElementById('audio');

      audioBtn.on('click', function () {
        if (audioWrap.hasClass('play')) {
          audio.play();
          audioWrap.removeClass('play');
        } else {
          audio.pause();
          audioWrap.addClass('play');
        }
      });
    });

    team_btn.addEventListener('click', () => {
      location.href = `teaming.php?id1=` + encodeURIComponent(id1) + "&id2=" + encodeURIComponent(id2) + "&id3=" + encodeURIComponent(id3) + "&id4=" + encodeURIComponent(id4)
        + "&id5=" + encodeURIComponent(id5) + "&id6=" + encodeURIComponent(id6) + "&id7=" + encodeURIComponent(id7) + "&id8=" + encodeURIComponent(id8)
        + "&id9=" + encodeURIComponent(id9) + "&id10=" + encodeURIComponent(id10);
    });
  </script>
</body>

</html>